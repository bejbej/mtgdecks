angular.module("templates",[]).run(["$templateCache",function(e){e.put("404/404.html","<div style=color:white;><h1>404</h1><p>Two roads diverged in a yellow wood,<br>And sorry I could not travel both<br>And be one traveler, long I stood<br>And looked down one as far as I could<br>To where it bent in the undergrowth;</p><p>Then took the other, as just as fair,<br>And having perhaps the better claim,<br>Because it was grassy and wanted wear;<br>Though as for that the passing there<br>Had worn them really about the same,</p><p>And both that morning equally lay<br>In leaves no step had trodden black.<br>Oh, I kept the first for another day!<br>Yet knowing how way leads on to way,<br>I doubted if I should ever come back.</p><p>I shall be telling this with a sigh<br>Somewhere ages and ages hence:<br>Two roads diverged in a wood, and Iâ€”<br>I took the one less traveled by,<br>And that has made all the difference.</p></div>"),e.put("cardGroup/cardGroup.html",'<div class="panel panel-default" ng-controller="CardGroupController as vm"><div class=panel-heading ng-if=!vm.isEditing ng-click="vm.showToolbar = !vm.showToolbar"><span>{{::vm.cardGroup.name}}</span> <span ng-if=!vm.isEditing><span class=badge ng-if=!vm.isEditing>{{vm.cardGroup.count()}}</span> <button class="btn btn-default btn-xs" ng-click="vm.startEditing(); $event.stopPropagation();">Edit</button> <span class="glyphicon pull-right" ng-class="{\'glyphicon-chevron-up\': vm.showToolbar, \'glyphicon-chevron-down\': !vm.showToolbar}" ng-if="vm.cardGroup.cards.length > 0"></span></span></div><div class=panel-heading ng-if=vm.isEditing><span>{{::vm.cardGroup.name}}</span> <button class="btn btn-default btn-xs" ng-click=vm.applyChanges()>Apply Changes</button> <button class="btn btn-default btn-xs" ng-click=vm.discardChanges()>Discard Changes</button></div><div class=radio-group ng-if="vm.cardGroup.cards.length > 0 && !vm.isEditing && vm.showToolbar"><label><input type=radio ng-model=vm.view value=group-by-type ng-click="vm.showToolbar = false"> Card Type</label> <label><input type=radio ng-model=vm.view value=group-by-color ng-click="vm.showToolbar = false"> Color</label> <label><input type=radio ng-model=vm.view value=group-by-cmc ng-click="vm.showToolbar = false"> Converted Mana Cost</label></div><div class="alert alert-danger margin" ng-if="vm.cardGroup.failedCards.length > 0">Couldn\'t identify the following cards:<ul><li ng-repeat="card in ::vm.cardGroup.failedCards">{{::card.name}}</li></ul></div><div ng-if="!vm.isEditing && vm.cardGroup.cards.length > 0"><directive-container directive=vm.view cards=vm.cardGroup.cards></directive-container></div><form name=vm.form class=margin ng-if=vm.isEditing><div class=form-group><textarea class=form-control ng-model=vm.cardsBlob ng-model-options="{updateOn: \'blur\'}"></textarea></div><button class="btn btn-default" type=button ng-click=vm.applyChanges()>Apply Changes</button> <button class="btn btn-default" type=button ng-click=vm.discardChanges()>Discard Changes</button></form></div>'),e.put("cardSet/cardSet.html",'<div class=margin style="margin-top: 0px"><div class=row><div class=col-sm-4 ng-repeat="column in columns"><div class=card-group ng-repeat="row in ::column"><h3>{{::row.name}} <span class=badge>{{::row.numberOfCards}}</span></h3><div ng-repeat="card in ::row.cards"><span class=quantity>{{::card.quantity}}</span> <a class=name href={{::card.storeUrl()}} card-preview=card.imageUrl() lightbox=card.imageUrl()>{{::card.name}}</a> <span class=price></span></div></div></div></div></div>'),e.put("deck/deck.html",'<div ng-controller="DeckController as vm"><spinner class=light ng-if=!vm.deck></spinner><div class="panel panel-default" ng-if=vm.deck><div class="panel-heading form-inline"><input class="form-control name-input" ng-model=vm.deck.name ng-model-options="{updateOn: \'blur\'}" ng-change=vm.onChange() pu-elastic-input> <button class="btn btn-default" ng-click=vm.save() ng-if=!vm.deck.id ng-disabled=vm.isSaving>{{ vm.isSaving ? "Syncing" : "Sync to Cloud" }}<pulse ng-if=vm.isSaving></pulse></button> <button class="btn btn-default" ng-click=vm.delete() ng-if=vm.deck.id ng-disabled=vm.isDeleting>{{ vm.isDeleting ? "Removing" : "Remove from Cloud" }}<pulse ng-if=vm.isDeleting></pulse></button></div></div><div class="panel panel-default" ng-if="vm.deck.cardGroups[0].cards.length > 0"><div class=panel-heading>Stats</div><div class=panel-body><stats cards=vm.deck.cardGroups[0].cards></stats></div></div><div ng-repeat="cardGroup in ::vm.deck.cardGroups"><card-group group=cardGroup on-change=vm.onChange></card-group></div></div>'),e.put("decks/decks.html",'<div ng-controller="DecksController as vm"><spinner class=light ng-if=!vm.decks></spinner><div class=list-group><a class=list-group-item href=#/decks/{{::deck.id}} ng-repeat="deck in ::vm.decks">{{::deck.name}}</a></div></div>'),e.put("pulse/pulse.html",'<div class="sk-spinner sk-spinner-pulse"></div>'),e.put("spinner/spinner.html",'<div class=sk-fading-circle><div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div></div>'),e.put("statGroup/statGroup.html",'<div class=stat-group><h3>{{::group.name}}</h3><div ng-repeat="stat in group.stats"><span class=name>{{::stat.name}}</span> <span class=bar>{{::"X".repeat(stat.value)}}</span> <span class=value ng-if="stat.value > 0">{{::stat.value}}</span></div></div>'),e.put("stats/statsView.html",'<div ng-controller="StatsController as vm"><div class=row ng-if="vm.statGroups.length > 0"><div class=col-xs-12><stat-group group=vm.statGroups[0]></stat-group></div></div></div>')}]);var app;!function(e){angular.module("app",["templates","ngRoute","puElasticInput","ngLocationUpdate"])}(app||(app={}));var app;!function(e){angular.module("app").constant("config",appConfig);var t=void 0,r=function(){void 0===t?t=new Date:(new Date).getTime()-t.getTime()<100?(delete t,appConfig.enableHover=!0,document.body.removeEventListener("mouseover",r)):t=new Date};document.body.addEventListener("mouseover",r)}(app||(app={}));var app;!function(e){var t=function(){function e(e){e.when("/decks/:id",{templateUrl:"deck/deck.html"}).when("/decks",{templateUrl:"decks/decks.html"}).otherwise({templateUrl:"404/404.html"})}return e.$inject=["$routeProvider"],e}();angular.module("app").config(t)}(app||(app={}));var app;!function(e){var t=function(){function e(){}return e}();e.CardSet=t}(app||(app={}));var app;!function(e){var t=function(){function e(){var e=this;this.exec=function(t,r,n){for(var a=t.map(n),i=e.generateReferenceArray(a),c=[a.length],o=a.reduce(function(e,t){return e+t});;){var s=e.split(i,o-1);if(void 0===s)break;if(s.groupSizes.length>r)break;c=s.groupSizes,o=s.largestSize}var u=0;return c.map(function(e){var r=t.slice(u,u+e);return u+=e,r})},this.generateReferenceArray=function(e){for(var t=[],r=0;r<e.length;++r){var n=0,a=[];t.push(a);for(var i=r;i<e.length;++i)n+=e[i],a.push(n)}return t},this.split=function(e,t){for(var r=[],n=0,a=0;a<e.length;){var i=e[a];if(i[0]>t)return;for(var c=0;c<i.length-1&&!(i[c+1]>t);++c);n=i[c]>n?i[c]:n,r.push(c+1),a=a+c+1}return{groupSizes:r,largestSize:n}}}return e}();e.GroupEvenly=t}(app||(app={}));var app;!function(e){var t=function(){function e(){}return e}();e.NameQuantityPair=t}(app||(app={}));var app;!function(e){var t=function(){function e(){}return e}();e.Stat=t}(app||(app={}));var app;!function(e){var t=function(){function e(){}return e}();e.StatGroup=t}(app||(app={}));var app;!function(e){var t=function(){function e(e){var t=this;this.config=e,this.getOffset=function(e){var t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+r}},this.showCardPreview=function(e,r){var n=document.getElementById("card-preview");n||(n=document.createElement("img"),n.id="card-preview",document.body.appendChild(n));var a=t.getOffset(e.currentTarget);n.style.top=a.top-100+"px",n.style.left=a.left+e.currentTarget.offsetWidth+20+"px",n.src=r},this.hideCardPreview=function(){var e=document.getElementById("card-preview");e&&(e.src="",e.style.top="-300px",e.style.left="-200px")},this.restrict="A",this.link=function(e,r,n){var a;r[0].addEventListener("mouseover",function(r){t.config.enableHover&&(a||(a=e.$eval(n.lightbox)),t.showCardPreview(r,a))}),r[0].addEventListener("mouseleave",function(e){t.config.enableHover&&t.hideCardPreview()})}}return e}();angular.module("app").directive("cardPreview",["config",function(e){return new t(e)}])}(app||(app={}));var app;!function(e){var t=function(){function e(e){var t=this;this.$compile=e,this.restrict="E",this.link=function(e,r,n){e.$watch(n.directive,function(a){var i=Object.keys(n).reduce(function(e,t){if("$"!==t[0]&&"directive"!==t){var r=t+'="'+n[t]+'"';e.push(r)}return e},[]).join(" "),c="<"+a+" "+i+"></"+a+">",o=t.$compile(c)(e);r[0].firstChild&&r[0].firstChild.remove(),r.append(o)})}}return e}();angular.module("app").directive("directiveContainer",["$compile",function(e){return new t(e)}])}(app||(app={}));var app;!function(e){var t=function(){function e(){var e=this;this.showLightbox=function(e,t){var r=document.createElement("div");r.className="lightbox";var n=document.createElement("img");n.src=t,r.appendChild(n),r.addEventListener("click",function(e){r.remove()}),document.body.appendChild(r),e.preventDefault()},this.restrict="A",this.link=function(t,r,n){var a;r[0].addEventListener("click",function(r){a||(a=t.$eval(n.lightbox)),e.showLightbox(r,a)})}}return e}();angular.module("app").directive("lightbox",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(e){var t=this;this.config=e,this.imageUrl=function(){return t.config.imagesUrl+t.multiverseId+".jpg"},this.storeUrl=function(){return t.config.storeUrl+t.name.replace(/ /g,"+")}}return e}();e.Card=t}(app||(app={}));var app;!function(e){var t=function(){function t(t){var r=this;this.CardService=t,this.setCardBlob=function(e){var t=r.getNameQuantityPairs(e);r.loadCards(t),r.cardBlob=r.formatCardBlob(t)},this.getCardBlob=function(){return r.cardBlob},this.count=function(){return r.cards.reduce(function(e,t){return e+Number(t.quantity)},0)},this.formatName=function(e){var t=function(e){return e.replace(/[^\s-]+/g,function(e,t){return t>0&&["a","an","and","but","from","in","into","of","or","the","to","with"].indexOf(e.toLowerCase())>=0?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},r=function(e){return e.replace(/\s*[\/\\]{2}\s*/," // ")};return[function(e){return e.trim()},r,t].reduce(function(e,t){return t(e)},e)},this.getNameQuantityPairs=function(t){return t.split(/\n[\s\n]*/).map(function(t){var n=/^(?:(\d+)[Xx]?\s)?\s*([^0-9]+)$/.exec(t.trim()),a=new e.NameQuantityPair;return null===n?a.name=t:(a.quantity=Number(n[1]||1),a.name=r.formatName(n[2])),a}).reduce(function(e,t){var r=e.filter(function(e){return e.name===t.name})[0];return r?r.quantity=r.quantity+t.quantity:e.push(t),e},[]).sort(function(e,t){return void 0===e.quantity==(void 0===t.quantity)?e.name>t.name?1:-1:void 0===e.quantity?1:void 0===t.quantity?-1:void 0})},this.loadCards=function(e){r.failedCards=[];var t=e.map(function(e){return e.name.trim()}).filter(function(e){return e&&e.length>2});return 0===t.length?void(r.cards=[]):void r.CardService.getCards(t).then(function(t){var n=[];e.forEach(function(e){var a=t.filter(function(t){return t.name.toLowerCase()===e.name.toLowerCase()})[0];return void 0===a?void r.failedCards.push(e):(a.quantity=e.quantity,void n.push(a))}),r.cards=n.sort(function(e,t){return e.name>t.name?1:-1})})},this.formatCardBlob=function(e){return e.map(function(e){return(e.quantity?e.quantity+"x ":"")+e.name}).join("\n")},this.name=name,this.cards=[],this.cardBlob=""}return t}();e.CardGroup=t}(app||(app={}));var app;!function(e){var t=function(){function e(e,t){var r=this;this.$q=e,this.DeckService=t,this.save=function(){if(r.id)return r.DeckService.updateDeck(r);var e=r.$q.defer();return r.DeckService.createDeck(r).then(function(t){r.id=t,e.resolve()},e.reject),e.promise},this["delete"]=function(){if(r.id){var e=r.$q.defer();return r.DeckService.deleteDeck(r.id).then(function(){r.id=void 0,e.resolve()},e.reject),e.promise}return r.$q.reject()}}return e}();e.Deck=t}(app||(app={}));var app;!function(e){var t=function(){function e(e,t){var r=this;this.config=e,this.CardFactory=t,this.key="cards",this.versionKey="cards-version",this.version="1",this.get=function(e){var t=JSON.parse(localStorage.getItem(r.key)),n=(new Date).getTime();if(!t)return t={},localStorage.setItem(r.key,JSON.stringify(t)),{cards:[],failedNames:e};var a={cards:[],failedNames:[]},a=e.reduce(function(e,a){var i=t[a.toLowerCase()];if(void 0===i)e.failedNames.push(a);else{i.date=n;var c=angular.merge(r.CardFactory.createCard(),i);delete c.date,e.cards.push(c)}return e},a);return localStorage.setItem(r.key,JSON.stringify(t)),a},this.add=function(e){if(0!==r.config.cardCacheLimit){var t=JSON.parse(localStorage.getItem(r.key)),n=(new Date).getTime();e.map(function(e){return{date:n,name:e.name,primaryType:e.primaryType,cmc:e.cmc,multiverseId:e.multiverseId,color:e.color}}).forEach(function(e){t[e.name.toLowerCase()]=e});var a=Object.keys(t);if(a.length>r.config.cardCacheLimit){var i=a.length-r.config.cardCacheLimit,i=i>r.config.cardCacheLimit/10?i:Math.ceil(r.config.cardCacheLimit/10);a.sort(function(e,r){return t[e].date-t[r].date}).slice(0,i).forEach(function(e){delete t[e]})}localStorage.setItem(r.key,JSON.stringify(t));(new Date).getTime()}},localStorage.getItem(this.versionKey)!==this.version&&(localStorage.removeItem(this.key),localStorage.setItem(this.versionKey,this.version))}return e.$inject=["config","CardFactory"],e}();e.CardCacheService=t,angular.module("app").service("CardCacheService",t)}(app||(app={}));var app;!function(e){var t=function(){function t(e){this.$injector=e}return t.$inject=["$injector"],t.prototype.createCard=function(){return new e.Card(this.$injector.get("config"))},t}();e.CardFactory=t,angular.module("app").service("CardFactory",t)}(app||(app={}));var app;!function(e){var t=function(){function t(e){this.$injector=e}return t.$inject=["$injector"],t.prototype.createCardGroup=function(){return new e.CardGroup(this.$injector.get("CardService"))},t}();e.CardGroupFactory=t,angular.module("app").service("CardGroupFactory",t)}(app||(app={}));var app;!function(e){var t=function(){function e(e,t,r,n,a){var i=this;this.config=e,this.$http=t,this.$q=r,this.CardCacheService=n,this.CardFactory=a,this.getCards=function(e){var t=i.CardCacheService.get(e);if(0===t.failedNames.length)return i.$q.when(t.cards);var r=i.$q.defer(),n=i.config.cardsUrl+"?"+t.failedNames.map(function(e){return"name="+e.replace(/ /g,"+")}).join("&");return i.$http.get(n).then(function(e){var n=e.data.map(i.mapApiCard);i.CardCacheService.add(n),r.resolve(t.cards.concat(n))},r.reject),r.promise},this.mapApiCard=function(e){var t=i.CardFactory.createCard();return angular.merge(t,e)}}return e.$inject=["config","$http","$q","CardCacheService","CardFactory"],e}();e.CardService=t,angular.module("app").service("CardService",t)}(app||(app={}));var app;!function(e){var t=function(){function t(e){this.$injector=e}return t.$inject=["$injector"],t.prototype.createDeck=function(){return new e.Deck(this.$injector.get("$q"),this.$injector.get("DeckService"))},t}();e.DeckFactory=t,angular.module("app").service("DeckFactory",t)}(app||(app={}));var app;!function(e){var t=function(){function e(e,t,r,n,a){var i=this;this.$http=t,this.$q=r,this.DeckFactory=n,this.CardGroupFactory=a,this.getDeck=function(e){var t=i.$q.defer();return i.$http.get(i.url+"/"+e).then(function(e){t.resolve(i.mapApiDeck(e.data))}),t.promise},this.getDecksByQuery=function(e){var t=i.$q.defer();return i.$http.get(i.url).then(function(e){t.resolve(e.data.results)}),t.promise},this.createDeck=function(e){var t=i.$q.defer(),r={name:e.name,cardGroups:e.cardGroups.map(function(e){return{name:e.name,cardBlob:e.getCardBlob()}})};return i.$http.post(i.url,r).then(function(e){t.resolve(e.data.id)}),t.promise},this.updateDeck=function(e){var t=i.$q.defer(),r={name:e.name,cardGroups:e.cardGroups.map(function(e){return{name:e.name,cardBlob:e.getCardBlob()}})};return i.$http.put(i.url+"/"+e.id,r).then(function(){t.resolve()}),t.promise},this.deleteDeck=function(e){var t=i.$q.defer();return i.$http["delete"](i.url+"/"+e).then(function(){t.resolve()}),t.promise},this.mapApiDeck=function(e){var t=i.DeckFactory.createDeck();return t.id=e.id,t.name=e.name,t.cardGroups=e.cardGroups.map(function(e){var t=i.CardGroupFactory.createCardGroup();return t.name=e.name,t.setCardBlob(e.cardBlob),t}),t},this.url=e.decksUrl}return e.$inject=["config","$http","$q","DeckFactory","CardGroupFactory"],e}();e.DeckService=t,angular.module("app").service("DeckService",t)}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.scope={group:"=",onChange:"="},this.templateUrl="cardGroup/cardGroup.html"}return e}();angular.module("app").directive("cardGroup",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(e,t){var r=this;this.view="group-by-type",this.startEditing=function(){r.cardsBlob=r.cardGroup.getCardBlob(),r.isEditing=!0},this.applyChanges=function(){r.form.$dirty&&(r.cardGroup.setCardBlob(r.cardsBlob),r.onChange&&r.onChange()),r.isEditing=!1},this.discardChanges=function(){r.isEditing=!1},this.cardGroup=e.group,this.onChange=e.onChange,this.isEditing=!1}return e.$inject=["$scope","config"],e}();angular.module("app").controller("CardGroupController",t)}(app||(app={}));var app;!function(e){var t=function(){function t(){var t=this;this.groupByCmc=function(t){var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],n=r.reduce(function(r,n){var a=new e.CardSet;return a.name=n.toString()+" drop",a.cards=t.filter(function(e){return e.cmc===n}),a.numberOfCards=a.cards.reduce(function(e,t){return e+t.quantity},0),a.cards.length>0&&r.push(a),r},[]);return(new e.GroupEvenly).exec(n,3,function(e){return e.cards.length+4})},this.restrict="E",this.scope={cards:"="},this.templateUrl="cardSet/cardSet.html",this.link=function(e){e.$watchCollection("cards",function(r){e.columns=t.groupByCmc(r)})}}return t}();angular.module("app").directive("groupByCmc",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function t(){var t=this;this.groupByColor=function(t){var r=["white","blue","black","red","green","multicolored","colorless"],n=r.reduce(function(r,n){var a=new e.CardSet;return a.name=n,a.cards=t.filter(function(e){return e.color===n}),a.numberOfCards=a.cards.reduce(function(e,t){return e+t.quantity},0),a.cards.length>0&&r.push(a),r},[]);return(new e.GroupEvenly).exec(n,3,function(e){return e.cards.length+4})},this.restrict="E",this.scope={cards:"="},this.templateUrl="cardSet/cardSet.html",this.link=function(e){e.$watchCollection("cards",function(r){e.columns=t.groupByColor(r)})}}return t}();angular.module("app").directive("groupByColor",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function t(){var t=this;this.groupByType=function(t){var r=[["creature"],["artifact","enchantment","planeswalker","land"],["instant","sorcery"]];return r.map(function(r){return r.reduce(function(r,n){var a=new e.CardSet;return a.name=n,a.cards=t.filter(function(e){return e.primaryType===n}),a.numberOfCards=a.cards.reduce(function(e,t){return e+t.quantity},0),a.cards.length>0&&r.push(a),r},[])})},this.restrict="E",this.scope={cards:"="},this.templateUrl="cardSet/cardSet.html",this.link=function(e){e.$watchCollection("cards",function(r){e.columns=t.groupByType(r)})}}return t}();angular.module("app").directive("groupByType",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.scope={id:"="},this.templateUrl="deck/deck.html"}return e}();angular.module("app").directive("deck",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(e,t,r,n,a){var i=this;this.$location=t,this.DeckService=r,this.DeckFactory=n,this.CardGroupFactory=a,this.onChange=function(){i.deck.id&&i.deck.save()},this.save=function(){i.isSaving=!0,i.deck.save()["finally"](function(){i.isSaving=!1,i.$location.update_path("/decks/"+i.deck.id)})},this["delete"]=function(){var e=confirm("Are you sure you want to remove this deck from the cloud?");e&&(i.isDeleting=!0,i.deck["delete"]()["finally"](function(){i.isDeleting=!1,i.$location.update_path("/decks/new")}))},this.createNewDeck=function(){var e=i.DeckFactory.createDeck();e.name="New Deck";var t=i.CardGroupFactory.createCardGroup(),r=i.CardGroupFactory.createCardGroup(),n=i.CardGroupFactory.createCardGroup();return t.name="Mainboard",r.name="Sideboard",n.name="Maybeboard",e.cardGroups=[t,r,n],e},"new"===e.id?this.deck=this.createNewDeck():this.DeckService.getDeck(e.id).then(function(e){i.deck=e})}return e.$inject=["$routeParams","$location","DeckService","DeckFactory","CardGroupFactory"],e}();angular.module("app").controller("DeckController",t)}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.templateUrl="decks/decks.html"}return e}();angular.module("app").directive("decks",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(e){var t=this;e.getDecksByQuery(null).then(function(e){t.decks=e.sort(function(e,t){return e.name>t.name?1:-1})})}return e.$inject=["DeckService"],e}();angular.module("app").controller("DecksController",t)}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.templateUrl="pulse/pulse.html"}return e}();angular.module("app").directive("pulse",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.templateUrl="spinner/spinner.html"}return e}();angular.module("app").directive("spinner",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.scope={group:"="},this.templateUrl="statGroup/statGroup.html"}return e}();angular.module("app").directive("statGroup",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function e(){this.restrict="E",this.scope={cards:"="},this.templateUrl="stats/statsView.html"}return e}();angular.module("app").directive("stats",function(){return new t})}(app||(app={}));var app;!function(e){var t=function(){function t(t,r){var n=this;this.unique=function(e,t,r){return r.indexOf(e)===t},this.createStatGroup=function(t,r){var a=new e.StatGroup;a.name=r.name;var i=t.filter(function(e){return r.types.indexOf(e.primaryType)>=0}),c=i.map(function(e){return e.cmc}).filter(n.unique).sort();a.stats=[];for(var o=0;o<=c[c.length-1];++o){var s=new e.Stat;s.name=o.toString(),s.value=i.filter(function(e){return e.cmc===o}).reduce(function(e,t){return e+Number(t.quantity)},0),a.stats.push(s)}return a},this.createStatGroups=function(e,t){return t.map(function(t){return n.createStatGroup(e,t)})},this.updateStats=function(e,t,r){e&&e.length>0?n.statGroups=n.createStatGroups(e,n.categories):n.statGroups=[]},this.categories=r.statCategories,t.$watchCollection("cards",this.updateStats)}return t.$inject=["$scope","config"],t}();angular.module("app").controller("StatsController",t)}(app||(app={}));